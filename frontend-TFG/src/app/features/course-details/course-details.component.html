<div class="container mt-5">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card">
        <div class="card-body">
          <h1 class="card-title text-center mb-4">{{course?.title}}</h1>
          
          <div class="course-info mb-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="badge bg-primary">Nivel: {{course?.difficulty_level}}</span>
              <span><i class="bi bi-clock"></i> {{course?.duration_minutes}} minutos</span>
              <span class="badge bg-warning text-dark" *ngIf="course?.is_premium">Premium</span>
            </div>

            <h4>Descripci√≥n del Curso</h4>
            <p class="lead">{{course?.description}}</p>
            
            <h4>Apartados del Curso</h4>
            <div class="list-group mb-4">
              <div *ngFor="let section of courseSections" class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <i class="bi" [class.bi-lock-fill]="isPremiumLocked(section)" [class.bi-unlock-fill]="!isPremiumLocked(section)"></i>
                    {{section.title}}
                    <span class="badge bg-warning text-dark ms-2" *ngIf="section.is_premium">Premium</span>
                    <span class="badge bg-success ms-2" *ngIf="section.completado">Completado</span>
                  </div>
                </div>
                
                <div *ngIf="isPremiumLocked(section)" class="premium-lock-message mt-2 text-muted">
                  <small>
                    <i class="bi bi-info-circle"></i>
                    Este apartado es exclusivo para usuarios Premium
                    <a routerLink="/pricing" class="ms-2 text-warning">Actualizar a Premium</a>
                  </small>
                </div>
              </div>
            </div>
            
            <div class="text-center">
              <button class="btn btn-success btn-lg" (click)="startCourse()" [disabled]="course?.is_premium && userPlan !== 'Premium'">
                {{ hasProgress ? 'Continuar curso' : 'Comenzar curso' }}
              </button>
              
              <div *ngIf="course?.is_premium && userPlan !== 'Premium'" class="mt-3">
                <a routerLink="/pricing" class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  Actualiza a Premium para acceder a este curso
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="text-center mt-4" *ngIf="loading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
</div>

<div class="alert alert-danger mt-4" *ngIf="error">
  {{error}}
</div>

<style>
.course-details {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.course-header {
  margin-bottom: 2rem;
}

.course-meta {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
}

.premium-badge {
  background-color: #ffd700;
  color: #000;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-weight: bold;
}

.sections-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.section-item {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 1rem;
}

.section-item.premium {
  border-color: #ffd700;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.section-badges {
  display: flex;
  gap: 0.5rem;
}

.completed-badge {
  background-color: #4caf50;
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.premium-lock {
  text-align: center;
  padding: 2rem;
  background-color: #f9f9f9;
  border-radius: 4px;
}

.premium-lock i {
  font-size: 2rem;
  color: #ffd700;
  margin-bottom: 1rem;
}

.upgrade-button {
  display: inline-block;
  background-color: #ffd700;
  color: #000;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  text-decoration: none;
  margin-top: 1rem;
  font-weight: bold;
}

.course-actions {
  margin-top: 2rem;
  text-align: center;
}

.start-button {
  background-color: #4caf50;
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 4px;
  font-size: 1.1rem;
  cursor: pointer;
}

.start-button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

.upgrade-link {
  display: block;
  margin-top: 1rem;
  color: #666;
  text-decoration: none;
}

.loading, .error {
  text-align: center;
  padding: 2rem;
}

.error {
  color: #f44336;
}
</style>