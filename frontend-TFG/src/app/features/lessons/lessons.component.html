<div class="container">
  <div class="search-container text-center mb-5">
    <div class="search-wrapper">
      <i class="bi bi-search search-icon"></i>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Buscar cursos..." 
        [(ngModel)]="searchTerm"
        (ngModelChange)="filterCourses()">
      <select 
        class="level-select"
        [(ngModel)]="selectedLevel"
        (ngModelChange)="filterCourses()">
        <option value="">Todos los niveles</option>
        <option value="Principiante">Principiante</option>
        <option value="Intermedio">Intermedio</option>
        <option value="Avanzado">Avanzado</option>
      </select>
    </div>
  </div>
  <h1 class="text-center page-title">Nuestros Cursos</h1>
  <p class="text-muted text-center">Explora nuestra variedad de cursos estructurados en diferentes niveles.</p>
  
  <div class="row g-4">
    <div class="col-md-4" *ngFor="let course of filteredCourses">
      <div class="card h-100" [class.premium-card]="course.is_premium">
        <div class="card-body">
          <div class="badges-container mb-2">
            <span class="badge bg-primary">Curso</span>
            <span *ngIf="course.is_premium" class="badge bg-warning ms-2">
              <i class="bi bi-star-fill me-1"></i>Premium
            </span>
          </div>
          <h5 class="card-title">{{course.title}}</h5>
          <p class="card-text">{{course.description}}</p>
          <div class="d-flex justify-content-between align-items-center mb-3">
            <span class="badge" [ngClass]="{
              'bg-success': course.difficulty_level === 'Principiante',
              'bg-warning': course.difficulty_level === 'Intermedio',
              'bg-danger': course.difficulty_level === 'Avanzado'
            }">Nivel: {{course.difficulty_level}}</span>
            <span class="text-muted">{{course.duration_minutes}} min</span>
          </div>
        </div>
        <div class="card-footer">
          <ng-container *ngIf="!isPremiumLocked(course); else lockedContent">
            <a [routerLink]="['/lessons', course.id]" class="btn btn-primary">Ver Curso</a>
          </ng-container>
          <ng-template #lockedContent>
            <div class="premium-lock">
              <i class="bi bi-lock-fill"></i>
              <p class="mb-2">Contenido Premium</p>
              <a routerLink="/user-settings" class="btn btn-warning">
                Actualizar a Premium
              </a>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
